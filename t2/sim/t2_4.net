Laborat√≥rio 2
* NGSPICE simulation script
* BJT amp with feedback
*

* forces current values to be saved
.options savecurrents

.param pi = 3.141592653589793

* supply voltage
Va 1 0 0.0 ac 1.0 sin(0 1 1000)
* capacitor
C 6 8 1.01848690215u

*resistors
Rr1 1 2 1.03835624717k
Rr2 3 2 2.03980117275k
Rr3 2 5 3.02589288375k
Rr4 5 0 4.09496586064k
Rr5 5 6 3.11837790188k
Rr6 0 7 2.06517135248k
Rr7 9 8 1.01138577854k

*dummy voltage source
Vdu 7 9 0

*dependent voltage source
Hvc 5 8 Vdu 8.24825537187k

*dependent current source
Gib 6 3 (2,5) 7.20092310025m

.IC v(6)=5.55634 v(8)=-2.94075

.control
*makes plots in color
set hcopypscolor=0
set color0=white
set color1=black
set color2=red
set color3=blue
set color4=violet
set color5=rgb:3/8/0
set color6=rgb:4/0/0
op

echo "********************************************"
echo  "Transient analysis"
echo "********************************************"
tran 1e-5 20e-3

hardcopy sim_4.ps v(1) v(6)
echo sim_4_FIG

echo "********************************************"
echo  "Frequency analysis"
echo "********************************************"
ac dec 100 0.1 100MEG

hardcopy sim_5_db.ps db(v(1)) db(v(6))
echo sim_5_db_FIG

hardcopy sim_5_ph.ps ph(v(1))*180/pi ph(v(6))*180/pi
*echo sim_5_ph_FIG


quit
.endc

.end

